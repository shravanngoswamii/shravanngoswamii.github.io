@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root,
  html[data-theme="light"] {
    --color-fill: 250, 250, 250; /* Clean Off-White */
    --color-text-base: 23, 23, 23; /* Near Black */
    --color-accent: 235, 94, 40; /* Vibrant Orange */
    --color-card: 255, 255, 255; /* Pure White */
    --color-card-muted: 245, 245, 245;
    --color-border: 229, 229, 229; /* Light Gray */
  }

  html[data-theme="dark"] {
    --color-fill: 10, 10, 10; /* Deep Obsidian */
    --color-text-base: 237, 237, 237; /* Off-White */
    --color-accent: 56, 189, 248; /* Sky Blue */
    --color-card: 23, 23, 23; /* Dark Gray */
    --color-card-muted: 38, 38, 38;
    --color-border: 40, 40, 40;
  }

  /* Catppuccin Themes - Preserved but refined */
  html[data-theme="latte"] {
    --color-fill: 239, 241, 245;
    --color-text-base: 76, 79, 105;
    --color-accent: 136, 57, 239;
    --color-card: 255, 255, 255;
    --color-card-muted: 230, 233, 239;
    --color-border: 204, 208, 218;
  }

  html[data-theme="frappe"] {
    --color-fill: 48, 52, 70;
    --color-text-base: 198, 208, 245;
    --color-accent: 202, 158, 230;
    --color-card: 65, 69, 89;
    --color-card-muted: 41, 44, 60;
    --color-border: 81, 87, 109;
  }

  html[data-theme="macchiato"] {
    --color-fill: 36, 39, 58;
    --color-text-base: 202, 211, 245;
    --color-accent: 198, 160, 246;
    --color-card: 54, 58, 79;
    --color-card-muted: 30, 32, 48;
    --color-border: 73, 77, 100;
  }

  html[data-theme="mocha"] {
    --color-fill: 30, 30, 46;
    --color-text-base: 205, 214, 244;
    --color-accent: 203, 166, 247;
    --color-card: 49, 50, 68;
    --color-card-muted: 24, 24, 37;
    --color-border: 69, 71, 90;
  }

  #sun-svg,
  html[data-theme="dark"] #moon-svg,
  html[data-theme="frappe"] #moon-svg,
  html[data-theme="macchiato"] #moon-svg,
  html[data-theme="mocha"] #moon-svg {
    display: none;
  }
  #moon-svg,
  html[data-theme="dark"] #sun-svg,
  html[data-theme="frappe"] #sun-svg,
  html[data-theme="macchiato"] #sun-svg,
  html[data-theme="mocha"] #sun-svg {
    display: block;
  }
  
  body {
    @apply flex min-h-[100svh] flex-col bg-skin-fill font-sans text-skin-base transition-colors duration-300;
  }

  h1, h2, h3, h4, h5, h6 {
    @apply font-serif tracking-tight font-bold;
  }

  section, footer {
    @apply mx-auto max-w-4xl px-4;
  }

  /* Refined Link Styles */
  a {
    /* Updated to use ring-accent and ring-offset-bgColor */
    @apply outline-none transition-all duration-200 focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 focus-visible:ring-offset-bgColor rounded-sm;
  }

  svg {
    @apply inline-block h-6 w-6 fill-skin-base transition-colors duration-200 group-hover:fill-skin-accent;
  }
  
  svg.icon-tabler {
    /* Updated: Switched from stroke-accent to text-skin-accent. 
       Since we use stroke-current, changing the text color handles the stroke color. */
    @apply inline-block h-6 w-6 scale-110 fill-transparent stroke-current stroke-2 opacity-90 transition-all duration-200 group-hover:text-skin-accent sm:scale-100;
  }

  /* Typography Pro (Cleaner reading experience) */
  .prose {
    @apply prose-headings:!mb-4 prose-headings:!text-skin-base prose-headings:font-serif prose-h3:italic prose-p:!text-skin-base/90 prose-p:leading-relaxed prose-a:!text-skin-accent prose-a:!no-underline prose-a:border-b prose-a:border-skin-accent/30 hover:prose-a:border-skin-accent hover:prose-a:bg-skin-accent/10 prose-a:transition-all prose-blockquote:!border-l-4 prose-blockquote:!border-skin-accent prose-blockquote:bg-skin-card prose-blockquote:py-2 prose-blockquote:px-4 prose-blockquote:rounded-r-lg prose-blockquote:not-italic prose-figcaption:!text-skin-base/70 prose-strong:!text-skin-base prose-strong:font-semibold prose-code:rounded-md prose-code:bg-skin-card prose-code:border prose-code:border-skin-line prose-code:px-1.5 prose-code:py-0.5 prose-code:before:!content-none prose-code:after:!content-none prose-code:font-mono prose-code:text-sm prose-li:marker:!text-skin-accent prose-img:!my-6 prose-img:rounded-xl prose-img:shadow-md prose-hr:!border-skin-line;
  }

  /* Custom Scrollbar */
  ::-webkit-scrollbar {
    @apply w-2;
  }
  ::-webkit-scrollbar-track {
    @apply bg-transparent;
  }
  ::-webkit-scrollbar-thumb {
    /* Fix: Use CSS variable directly instead of missing utility class */
    background-color: rgb(var(--color-border));
    @apply rounded-full hover:bg-skin-accent/50 transition-colors;
  }

  /* Syntax Highlighting adjustments for themes */
  html[data-theme="dark"] pre:has(code),
  html[data-theme="dark"] pre:has(code) span {
    color: var(--shiki-dark) !important;
    background-color: var(--shiki-dark-bg) !important;
  }
}

@layer components {
  .display-none {
    @apply hidden;
  }
  .focus-outline {
    /* Updated to use ring-accent and ring-offset-bgColor */
    @apply outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 focus-visible:ring-offset-bgColor;
  }
  
  /* Glass Effect Utility */
  .glass {
    @apply bg-skin-fill/80 backdrop-blur-md border-b border-skin-line/10 supports-[backdrop-filter]:bg-skin-fill/60;
  }
}
